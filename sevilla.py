import requestsimport urllib3from bs4 import BeautifulSoupimport mysql.connectorfrom PyPDF2 import PdfReaderfrom io import BytesIOimport datetimefrom urllib3.exceptions import InsecureRequestWarningurllib3.disable_warnings(InsecureRequestWarning)# Conectar a la base de datosconn = mysql.connector.connect(    host='localhost',    user='root',    password='',    database='justicio')cursor = conn.cursor()# URL de la página principalurl = 'https://www.sevilla.org/servicios/agencia-tributaria-de-sevilla/ordenanzas-fiscales'# Obtener la página principal con verificación SSL deshabilitadaresponse = requests.get(url, verify=False)soup = BeautifulSoup(response.content, 'html.parser')# Buscar todas las ordenanzas fiscalesordenanzas = soup.select('#content-core a[data-linktype="internal"]')# Fecha actualcurrent_date = datetime.date.today()for ordenanza in ordenanzas:    ordenanza_url = ordenanza['href']    grupo = ordenanza.text.strip()    print(f"\033[92mAccediendo a la URL de la ordenanza: {ordenanza_url}\033[0m")  # Imprimir en verde para depuración    print(f"\033[92mGrupo: {grupo}\033[0m")  # Imprimir en verde para depuración    ordenanza_response = requests.get(ordenanza_url, verify=False)    ordenanza_soup = BeautifulSoup(ordenanza_response.content, 'html.parser')        # Obtener todos los enlaces a PDFs    pdf_links = ordenanza_soup.select('a[data-linktype="internal"]')        for pdf_link in pdf_links:        pdf_url = pdf_link['href']        if pdf_url.endswith('.pdf'):            pdf_title = pdf_link.text.strip()            print(f"\033[92mAccediendo a la URL del PDF: {pdf_url}\033[0m")  # Imprimir en verde para depuración                        # Descargar y leer el contenido del PDF            pdf_response = requests.get(pdf_url, verify=False)            pdf_content = ''                        with BytesIO(pdf_response.content) as open_pdf_file:                reader = PdfReader(open_pdf_file)                for page_num in range(len(reader.pages)):                    page = reader.pages[page_num]                    pdf_content += page.extract_text()                        # Insertar en la base de datos            query = """                INSERT INTO normativa (ciudad, date, titulo, grupo, subgrupo, url, content)                VALUES (%s, %s, %s, %s, %s, %s, %s)            """            data = ('Sevilla', current_date, pdf_title, grupo, '', pdf_url, pdf_content)            cursor.execute(query, data)            conn.commit()            print(f"\033[92mInsertado en la base de datos: {pdf_title}\033[0m")  # Imprimir en verde para depuración# Cerrar la conexión a la base de datoscursor.close()conn.close()